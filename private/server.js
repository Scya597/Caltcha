!function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var o={};return t.m=e,t.c=o,t.i=function(e){return e},t.d=function(e,t,o){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,"a",o),o},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22)}([function(e,t){e.exports={team:{id:"teamid",name:"Autumn",members:["userid","Jennifer","Scarlett","Maximus","Samuel"],projects:["projectid","hihi","testproject"]},user:{id:"userid",username:"Benson",realname:"Superman",email:"superman@gmail.com",team:["Autumn","Facebook"]},project:{team:"teamid",id:"projectid",title:"testproject",minDuration:4,description:"testdescription",location:"moon",finaldate:{date:20170831,time:{from:900,to:1200}},deadline:20170820,ended:!1,superuser:"userid",normaluser:["Jennifer","Scarlett"],optionaluser:["Maximus"],closeduser:["Samuel"],votes:[{userid:"Jennifer",dates:[{date:20170729,time:[{from:930,to:1200},{from:1500,to:1800}]}]}]}}},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("path")},function(e,t){e.exports=require("webpack")},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t,o){e.isAuthenticated()?(console.log("Authenticated user "+e.user+" is calling APIs(routes.js)."),o()):(t.redirect("/login"),console.log("isLogin: "+("undefined"!=typeof e.user)),console.log("Someone not Authenticated tries to call APIs.(routes.js)"))}var s=o(1),u=n(s),i=o(16),a=n(i),l=u["default"].Router();l.get("/profile/:userId",r,a["default"].getteamanduser),l.get("/project/data/:userId",r,a["default"].getprojects),l.post("/project/new/",r,a["default"].createnewproject),l.post("/project/update/:userId",r,a["default"].updateproject),l.get("/project/stats/:projectId/:userId",r,a["default"].getstats),l.post("/project/vote/:userId",r,a["default"].uservote),l["delete"]("/project/remove/:userId",r,a["default"].rmproject),e.exports=l},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=o(1),s=n(r),u=o(0),i=n(u),a=o(2),l=s["default"].Router();l.get("/login",function(e,t){t.sendFile(a.join(__dirname,"../login.html"))}),l.post("/login",function(e,t){console.log(e.body.username+" is trying to login.(auth.js)");var o=i["default"].team.members.find(function(t){return t===e.body.username});o?e.logIn(o,function(){t.redirect("/")}):t.redirect("/login")}),l.get("/logout",function(e,t){console.log(e.user+" logout.(auth.js)"),e.logOut(),t.redirect("/login")}),e.exports=l},function(e,t){e.exports=require("mongoose")},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=process.env;t.nodeEnv="production";t["default"]={mongodbUri:"mongodb://localhost:27017/test",port:n.PORT||8080,host:n.HOST||"0.0.0.0",get serverUrl(){return"http://"+this.host+":"+this.port}}},function(e,t,o){"use strict";var n=o(2),r=o(3),s=o(19),u=o(18),i="webpack-hot-middleware/client",a="react-hot-loader/patch";e.exports={entry:{bundle:[i,a,"./src/index.js"]},output:{filename:"bundle.js",path:n.join(__dirname,"public"),publicPath:"/"},devtool:"eval",module:{loaders:[{test:/\.json$/,loader:"json-loader"},{test:/\.js$/,loaders:["react-hot-loader/webpack","babel"],exclude:/node_modules/},{test:/\.scss$/,loader:"style!css!sass"}]},plugins:[new r.HotModuleReplacementPlugin,new r.NoErrorsPlugin,new s({template:"./src/template.html",filename:"index.html"}),new u]}},function(e,t){e.exports=require("body-parser")},function(e,t){e.exports=require("cookie-parser")},function(e,t){e.exports=require("express-session")},function(e,t){e.exports=require("passport")},function(e,t){e.exports=require("passport-local")},function(e,t){e.exports=require("webpack-dev-middleware")},function(e,t){e.exports=require("webpack-hot-middleware")},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=o(17),s=(n(r),o(0)),u=[s.team],i=[s.user],a=[s.project];e.exports={getteamanduser:function(e,t){var o,n=[],r=e.params.userId;console.log(r);for(var s=0;s<u.length;s++)for(var a=0;a<u[s].members.length;a++)r===u[s].members[a]&&n.push(u[s]);for(var l=0;l<i.length;l++)r===i[l].id&&(o=i[l],console.log(o),console.log(n));console.log(o),t.send({teams:n,user:o})},getprojects:function(e,t){for(var o=[],n=e.params.userId,r=0;r<a.length;r++)if(n===a[r].superuser)o.push(a[r]);else{for(var s=0;s<a[r].normaluser.length;s++)n===a[r].normaluser[s]&&o.push(a[r]);for(var u=0;u<a[r].optionaluser.length;u++)n===a[r].optionaluser[u]&&o.push(a[r])}t.send({projects:o})},createnewproject:function(e,t){var o=e.body;a.push(o),t.send("Create "+o.title+" Successfully")},updateproject:function(e,t){for(var o=e.body,n=e.params.userId,r=0;r<a.length;r++)a[r].id===o.projectId&&a[r].superuser===n&&(a[r].ended=o.ended,a[r].deadline=o.deadline,t.send("You have updated "+a[r].title+" successfully!!"))},getstats:function(){},uservote:function(e,t){for(var o=e.body,n=e.params.userId,r=1,s=0;s<a.length;s++)if(a[s].id===o.projectId){for(var u=0;u<a[s].votes.length;u++)a[s].votes[u].userid===n&&(a[s].votes[u].dates=o.dates,r=0,t.send("You have voted successfully!!"));r&&(a[s].votes.push({userid:n,dates:o.dates}),t.send("You have voted successfully!!"))}},rmproject:function(e,t){for(var o=e.body,n=e.params.userId,r=0;r<a.length;r++)a[r].id===o.projectId&&a[r].superuser===n&&(a.splice(r,1),t.send("You have removed "+a[r].title+" successfully!!"))}}},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=o(6),s=n(r),u=new r.Schema({title:String,content:String}),i=s["default"].model("post",u);e.exports=i},function(e,t,o){"use strict";function n(){}function r(e){"function"==typeof e?this.handler=e:(e=e||{},this.port=e.port||9838,this.handler=e.handler||null)}function s(e){var t=Date.now()-e;return t>=1e3?(t/=1e3,t=Math.round(t),t+="s"):t+="ms"," ("+t+")"}var u=o(3),i=(o(20),o(21));r.prototype.apply=function(e){var t,o=this.handler;if(!o){o=n;var r=this.port,a="127.0.0.1",l=i("http://"+a+":"+r);l.on("connect",function(){o=l.emit.bind(l,"message")})}e.apply(new u.ProgressPlugin(function(e,n){o.call(null,[{type:"status",value:"Compiling"},{type:"progress",value:e},{type:"operations",value:n+s(t)}])})),e.plugin("compile",function(){t=Date.now(),o.call(null,[{type:"status",value:"Compiling"}])}),e.plugin("invalid",function(){o.call(null,[{type:"status",value:"Invalidated"},{type:"progress",value:0},{type:"operations",value:"idle"},{type:"clear"}])}),e.plugin("done",function(e){var n=e.compilation.options,r=n.devServer&&n.devServer.stats||n.stats||{colors:!0};o.call(null,[{type:"status",value:"Success"},{type:"progress",value:0},{type:"operations",value:"idle"+s(t)},{type:"stats",value:{errors:e.hasErrors(),warnings:e.hasWarnings(),data:e.toJson()}},{type:"log",value:e.toString(r)}])}),e.plugin("failed",function(){o.call(null,[{type:"status",value:"Failed"},{type:"operations",value:"idle"+s(t)}])})},e.exports=r},function(e,t){e.exports=require("html-webpack-plugin")},function(e,t){e.exports=require("net")},function(e,t){e.exports=require("socket.io-client")},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}var r=o(1),s=n(r),u=o(12),i=n(u),a=o(13),l=n(a),c=o(9),d=n(c),p=o(10),f=n(p),m=o(6),g=n(m),v=o(11),h=n(v),j=o(0),b=n(j),y=o(7),x=n(y),w=(0,s["default"])(),_=o(2),I=l["default"].Strategy;if(w.use((0,f["default"])()),w.use(d["default"].urlencoded({extended:!0})),i["default"].use(new I(function(e,t,o){var n=b["default"].team.members.find(function(t){return t===e});return n?o(null,n):o(null,!1,{message:"Incorrect username or password"})})),i["default"].serializeUser(function(e,t){t(null,e)}),i["default"].deserializeUser(function(e,t){t(null,e)}),w.use((0,h["default"])({secret:',DBj2%*N;Q"?(T9{mS{EVWvZ2G3,3BG$I)n,?mZ_3@0*?pwT2,lh@SC"jocVdbs',cookie:{maxAge:6e4},resave:!0,saveUninitialized:!1,name:"caltcha-sid"})),w.use(i["default"].initialize()),w.use(i["default"].session()),1)w.use(s["default"]["static"]("public")),w.use("/api",o(4)),w.use("/",o(5)),w.get("/",function(e,t){"undefined"==typeof e.user?t.redirect("/login"):t.sendFile(_.join(__dirname,"../public/index.html"))});else{var S=o(14),P=o(15),q=o(3),M=o(8),k=q(M),O=S(k,{publicPath:M.output.publicPath,stats:{colors:!0}});w.use(O),w.use(P(k)),w.use("/api",o(4)),w.use("/",o(5)),w.get("/",function(e,t){"undefined"==typeof e.user?t.redirect("/login"):t.sendFile(_.join(__dirname,"../public/index.html"))})}g["default"].Promise=global.Promise,g["default"].connect(process.env.MONGODB_URI||"mongodb://localhost/blog"),w.use(d["default"].json()),w.use(function(e,t,o,n){o.status(422).send({error:e.message}),n()}),w.listen(x["default"].port,x["default"].host,function(){console.info("Express listening on port",x["default"].port),console.log("production")})}]);
//# sourceMappingURL=server.js.map